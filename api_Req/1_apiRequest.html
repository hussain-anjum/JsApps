<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      table,
      th,
      td {
        border: 1px solid white;
        border-collapse: collapse;
        padding: 10px;
      }
      th {
        background-color: #424242;
      }
    </style>
  </head>
  <body
    style="
      background-color: #212121;
      color: white;
      font-family: Arial, sans-serif;
    "
  >
    <h1>XMLHttpRequest readyState Values</h1>
    <table>
      <thead>
        <tr>
          <th>Value</th>
          <th>State</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>0</code></td>
          <td><code>UNSENT</code></td>
          <td>Client has been created. <code>open()</code> not called yet.</td>
        </tr>
        <tr>
          <td><code>1</code></td>
          <td><code>OPENED</code></td>
          <td><code>open()</code> has been called.</td>
        </tr>
        <tr>
          <td><code>2</code></td>
          <td><code>HEADERS_RECEIVED</code></td>
          <td>
            <code>send()</code> has been called, and headers and status are
            available.
          </td>
        </tr>
        <tr>
          <td><code>3</code></td>
          <td><code>LOADING</code></td>
          <td>Downloading; <code>responseText</code> holds partial data.</td>
        </tr>
        <tr>
          <td><code>4</code></td>
          <td><code>DONE</code></td>
          <td>The operation is complete.</td>
        </tr>
      </tbody>
    </table>
  </body>
  <script>
    // XMLHttpRequest((XHR) objects)--> An API that provides client functionality for transferring data between a client and a server.
    // It is used to retrieve data from a URL without having to do a full page refresh. This enables a Web page to update
    // just part of a page without disrupting what the user is doing.

    // Older way: XMLHttpRequest object method to make API requests to get data from a server ==>
    const requestUrl = "https://api.github.com/users/hussain-anjum";

    const xhr = new XMLHttpRequest();

    xhr.open("GET", requestUrl); // initializes a request  method and url to send the request to
    xhr.onreadystatechange = function () {
      console.log(xhr.readyState); // logs the current state of the request (0 to 4)
      if (xhr.readyState === 4) {
        const data = JSON.parse(this.responseText); // parses the JSON response text into a JavaScript object
        // console.log(typeof data);
        console.log(data.twitter_username);
      }
    };
    xhr.send(); // sends the request to the server

    // New way: Fetch API method to make API requests to get data from a server ==>

    //fetch("https://api.github.com/users/hussain-anjum")
    //  .then((response) => response.json())
    //  .then((data) => console.log(data.twitter_username))
    //  .catch((error) => console.error(error));
  </script>
</html>
